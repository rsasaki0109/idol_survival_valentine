# イケメンサバイバル〜バレンタインの試練〜
## Ikemen Survival: Valentine's Trial

---

## 1. ゲームタイトル案

| 日本語 | 英語 |
|--------|------|
| イケメンサバイバル〜バレンタインの試練〜 | Ikemen Survival: Valentine's Trial |

---

## 2. ゲーム概要

> あなたはイケメン。女子からのチョコを集めてレベルアップしろ。
> ただし、嫉妬に燃える男子たちの石礫をかわし続けなければならない。
> 生き残れ、イケメン。

---

## 3. 世界観・コンセプト説明

- **舞台**: バレンタイン当日の学校の校庭
- **プレイヤー**: モテすぎて困っているイケメン高校生
- **状況**: 女子NPCはチョコを投げて愛を伝えようとし、男子NPCは嫉妬のあまり石を投げてくる
- **トーン**: コミカル・ネタ寄り（暴力的な表現は避け、デフォルメされた演出）
- **メッセージ**: 「モテるのも楽じゃない」

### 表現上の配慮
- 石を投げる行為は「嫉妬パワー」として抽象化
- ダメージ時のエフェクトはコミカルに（星が飛ぶなど）
- NPCの表情・動きはデフォルメして攻撃性を緩和

---

## 4. コアゲームループ

```
[開始]
   ↓
移動して女子NPCに近づく → チョコ獲得 → EXP増加 → レベルアップ
   ↓
男子NPCの石を回避 → 被弾するとHP減少
   ↓
[クリア条件達成] or [HP 0でゲームオーバー]
   ↓
[リザルト画面] → [リトライ or 終了]
```

**1プレイの目安時間**: 60〜90秒

---

## 5. ルール

### HP（ヒットポイント）
| 項目 | 値 |
|------|-----|
| 初期HP | 100 |
| 石1発のダメージ | 25 |
| HP回復手段 | なし（Phase1） |

### EXP（経験値）とレベル
| レベル | 必要EXP | 累計EXP |
|--------|---------|---------|
| Lv.1 | 0 | 0 |
| Lv.2 | 50 | 50 |
| Lv.3 | 100 | 150 |
| Lv.4 | 150 | 300 |
| Lv.5（MAX） | 200 | 500 |

- チョコ1個 = 25 EXP

### クリア条件（いずれか）
1. **時間生存**: 60秒間生き残る
2. **レベル達成**: Lv.5に到達する

### 敗北条件
- HPが0になる

---

## 6. 操作方法

| 入力 | アクション |
|------|-----------|
| W / ↑ / 左スティック上 | 前進 |
| A / ← / 左スティック左 | 左移動 |
| S / ↓ / 左スティック下 | 後退 |
| D / → / 左スティック右 | 右移動 |

- **攻撃アクションなし**（Phase1）
- ジャンプ: なし（地上移動のみ）
- 移動速度: 16 studs/sec（Robloxデフォルト）

---

## 7. NPCの種類と挙動

### 7.1 女子NPC（チョコを投げる）
| 項目 | 仕様 |
|------|------|
| 出現数 | 3〜5体（固定配置） |
| 行動パターン | その場で待機し、一定間隔でチョコを投げる |
| 投擲間隔 | 3秒ごと |
| 投擲方向 | プレイヤーの現在位置に向けて投げる |
| 見た目 | ピンク系の服、ハートマーク |
| 敵対性 | なし（フレンドリー） |

### 7.2 男子NPC（石を投げる）
| 項目 | 仕様 |
|------|------|
| 出現数 | 3〜5体（固定配置） |
| 行動パターン | その場で待機し、一定間隔で石を投げる |
| 投擲間隔 | 2秒ごと |
| 投擲方向 | プレイヤーの現在位置に向けて投げる（予測なし） |
| 見た目 | 青系の服、怒りマーク |
| 敵対性 | あり（ダメージ源） |

### NPC共通仕様
- 移動しない（固定位置）
- プレイヤーの方を常に向く（LookAt）
- 当たり判定あり（すり抜け不可）

---

## 8. 投擲物の仕様

### 8.1 チョコ
| 項目 | 仕様 |
|------|------|
| 形状 | ハート型の箱（ピンク） |
| サイズ | 2x2x2 studs |
| 速度 | 30 studs/sec |
| 軌道 | 放物線（重力あり） |
| 当たり判定 | プレイヤーに接触で消滅＋EXP獲得 |
| 地面接触時 | 3秒後に消滅（拾える） |
| 獲得時エフェクト | キラキラ＋「+25 EXP」テキスト |

### 8.2 石
| 項目 | 仕様 |
|------|------|
| 形状 | 灰色の球体 |
| サイズ | 1.5x1.5x1.5 studs |
| 速度 | 40 studs/sec |
| 軌道 | 直線（重力なし）※ シンプル化 |
| 当たり判定 | プレイヤーに接触で消滅＋ダメージ |
| 地面/壁接触時 | 即消滅 |
| 被弾時エフェクト | 画面フラッシュ（赤）＋星エフェクト |

---

## 9. ステージ構成

### マップ概要
- **サイズ**: 100 x 100 studs（正方形）
- **地形**: 平坦な校庭風
- **壁**: 四方を低い壁で囲む（落下防止）

### 配置
```
[壁]━━━━━━━━━━━━━━━━━━━━━[壁]
┃  ♀        ♂        ♀   ┃
┃                         ┃
┃      ♂         ♂       ┃
┃                         ┃
┃  ♀        [P]       ♂   ┃
┃                         ┃
┃      ♀         ♂       ┃
┃                         ┃
┃  ♂        ♀        ♂   ┃
[壁]━━━━━━━━━━━━━━━━━━━━━[壁]

♀ = 女子NPC（5体）
♂ = 男子NPC（5体）
[P] = プレイヤー初期位置（中央）
```

### 障害物（オプション・MVP外）
- 机、ベンチなどの遮蔽物（Phase1では配置しない）

---

## 10. レベルアップ要素

### 見た目変化（Phase1: 最低限）
| レベル | 変化 |
|--------|------|
| Lv.1 | 初期状態 |
| Lv.2 | 頭上に星1つ |
| Lv.3 | 頭上に星2つ |
| Lv.4 | 頭上に星3つ |
| Lv.5 | 頭上に王冠＋キラキラエフェクト |

### 能力変化（Phase1ではなし）
- 移動速度アップなどはPhase2以降で検討

---

## 11. 実装タスク分解（Roblox Studio / Lua）

### 11.1 環境構築（0.5時間）
- [ ] 新規プロジェクト作成
- [ ] 基本フォルダ構成（ServerScriptService, ReplicatedStorage, StarterGui等）

### 11.2 ステージ作成（1時間）
- [ ] 100x100の床（Part）
- [ ] 四方の壁（Part x 4）
- [ ] SpawnLocation配置（中央）
- [ ] 背景色・照明設定

### 11.3 プレイヤー制御（1時間）
- [ ] 移動速度設定（Humanoid.WalkSpeed）
- [ ] ジャンプ無効化（Humanoid.JumpPower = 0）
- [ ] HP管理（NumberValue in Player）
- [ ] EXP/Level管理（NumberValue in Player）

### 11.4 NPC実装（2時間）
- [ ] 女子NPCモデル作成（シンプルなR6/R15）
- [ ] 男子NPCモデル作成（シンプルなR6/R15）
- [ ] NPCスポーン処理
- [ ] プレイヤー方向を向く処理（CFrame.lookAt）
- [ ] 投擲タイマー処理

### 11.5 投擲物実装（2時間）
- [ ] チョコPrefab作成
- [ ] 石Prefab作成
- [ ] 投擲ロジック（BodyVelocity or VectorForce）
- [ ] 当たり判定（Touched イベント）
- [ ] チョコ獲得処理（EXP加算）
- [ ] 石被弾処理（HP減算）

### 11.6 UI実装（1.5時間）
- [ ] HPバー（ScreenGui > Frame）
- [ ] EXP/Levelバー（ScreenGui > Frame）
- [ ] 残り時間表示（TextLabel）
- [ ] ゲームオーバー画面
- [ ] クリア画面
- [ ] 開始カウントダウン（3, 2, 1, START!）

### 11.7 ゲームフロー（1時間）
- [ ] ゲーム開始処理
- [ ] タイマー管理（60秒）
- [ ] クリア判定（時間 or Lv.5）
- [ ] ゲームオーバー判定（HP <= 0）
- [ ] リトライ処理

### 11.8 エフェクト（1時間）
- [ ] チョコ獲得時のパーティクル
- [ ] 被弾時の画面フラッシュ
- [ ] レベルアップ時のエフェクト
- [ ] 頭上の星/王冠表示

### 11.9 サウンド（0.5時間）
- [ ] BGM（フリー素材）
- [ ] チョコ獲得SE
- [ ] 被弾SE
- [ ] レベルアップSE
- [ ] クリア/ゲームオーバーSE

### 11.10 テスト・調整（1時間）
- [ ] バランス調整（NPC数、投擲間隔、ダメージ量）
- [ ] バグ修正
- [ ] モバイル対応確認

**合計見積もり: 約11.5時間（1.5日）**

---

## 12. MVP（最小実装）と後回しにする要素

### MVP（必須）
- [x] プレイヤー移動
- [x] HP/EXPシステム
- [x] 女子NPC（チョコ投擲）
- [x] 男子NPC（石投擲）
- [x] クリア/ゲームオーバー判定
- [x] 最低限のUI（HP、EXP、時間）
- [x] リトライ機能

### 後回し（Nice to Have）
- [ ] サウンド全般
- [ ] レベルアップ時の見た目変化
- [ ] パーティクルエフェクト
- [ ] 開始カウントダウン演出
- [ ] 障害物（遮蔽物）
- [ ] NPCのアニメーション
- [ ] リーダーボード

### カット（Phase1では実装しない）
- 能力アップ系（移動速度上昇など）
- マルチプレイ対応
- ステージ選択
- 難易度選択

---

## 13. 将来アップデート（Phase2）を見据えた設計メモ

### Phase2想定機能: ビーム反撃

> レベルアップでビームを撃てるようになり、男子NPCを撃退できる

### 拡張しやすくするための設計指針

#### 13.1 投擲物の抽象化
```lua
-- ReplicatedStorage/Modules/Projectile.lua
local Projectile = {}

function Projectile.create(config)
    -- config.type: "chocolate" | "stone" | "beam"（将来追加）
    -- config.damage: number
    -- config.speed: number
    -- config.owner: "player" | "npc"
end

return Projectile
```

#### 13.2 NPC状態管理
```lua
-- NPCにstateを持たせておく
npc.state = "active"  -- "active" | "stunned" | "defeated"（将来追加）
```

#### 13.3 プレイヤー能力のテーブル化
```lua
-- プレイヤーの能力を拡張可能な形式で管理
local PlayerAbilities = {
    canShoot = false,  -- Phase2でtrueに
    beamDamage = 0,
    beamCooldown = 0,
}
```

#### 13.4 入力の分離
```lua
-- 将来的に攻撃入力を追加しやすいよう、入力処理を分離
local InputHandler = {}

function InputHandler.onMove(direction)
    -- 移動処理
end

function InputHandler.onAttack()  -- Phase2で実装
    -- ビーム発射処理
end
```

#### 13.5 イベントベースの設計
```lua
-- ReplicatedStorage/Events/ にRemoteEventを配置
-- Phase2で追加するイベント例:
-- PlayerAttack: プレイヤーの攻撃
-- NPCDefeated: NPC撃破
```

### Phase2実装時の追加タスク（参考）
1. ビーム投擲物の追加
2. 発射入力（スペース or 右クリック）
3. NPCの被弾/撃退処理
4. レベル条件での発射解禁
5. クールダウン管理
6. ビーム用エフェクト

---

## 14. Roblox公開時の説明文

### 日本語
```
【イケメンサバイバル〜バレンタインの試練〜】

あなたはモテすぎて困っているイケメン！
女子からのチョコを集めてレベルアップしよう。
でも気をつけろ...嫉妬した男子たちが石を投げてくるぞ！

60秒生き残るか、Lv.5に到達すればクリア！
石に4回当たったらゲームオーバー...

操作: WASD / スティックで移動するだけ！

モテるのも楽じゃない。生き残れ、イケメン。
```

### 英語
```
【Ikemen Survival: Valentine's Trial】

You're a super handsome guy who's TOO popular!
Collect chocolates from girls to level up.
But watch out... jealous boys are throwing rocks at you!

Survive 60 seconds or reach Lv.5 to win!
Get hit by rocks 4 times and it's game over...

Controls: Just move with WASD / Stick!

Being handsome isn't easy. Survive, Ikemen.
```

---

## 付録: ファイル構成案

```
game/
├── ServerScriptService/
│   ├── GameManager.lua        -- ゲーム進行管理
│   ├── NPCManager.lua         -- NPC生成・管理
│   └── ProjectileHandler.lua  -- 投擲物の当たり判定
├── ReplicatedStorage/
│   ├── Modules/
│   │   ├── Projectile.lua     -- 投擲物生成
│   │   └── PlayerStats.lua    -- HP/EXP管理
│   ├── Prefabs/
│   │   ├── Chocolate.rbxm     -- チョコモデル
│   │   └── Stone.rbxm         -- 石モデル
│   └── Events/
│       ├── ChocolateCollected -- EXP獲得イベント
│       ├── StoneDamage        -- ダメージイベント
│       ├── LevelUp            -- レベルアップイベント
│       └── GameEnd            -- ゲーム終了イベント
├── StarterGui/
│   ├── HUD/
│   │   ├── HPBar              -- HPバー
│   │   ├── EXPBar             -- EXPバー
│   │   └── Timer              -- 残り時間
│   ├── GameOverScreen         -- ゲームオーバー画面
│   └── ClearScreen            -- クリア画面
├── StarterPlayer/
│   └── StarterPlayerScripts/
│       └── LocalController.lua -- 入力処理・UI更新
└── Workspace/
    ├── Stage/                  -- ステージ（床・壁）
    ├── NPCs/                   -- NPC配置
    └── SpawnLocation           -- 初期位置
```

---

## 最終チェックリスト

- [ ] 1人で60秒プレイして楽しいか
- [ ] 初見でルールが分かるか
- [ ] 難しすぎ/簡単すぎないか
- [ ] 不快な表現がないか
- [ ] モバイルでも操作できるか
- [ ] リトライがスムーズにできるか

---

**ドキュメント作成日**: 2025/02/XX
**Phase1 目標公開日**: バレンタイン前（2月13日まで）
